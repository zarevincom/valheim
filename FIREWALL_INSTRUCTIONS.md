# üî• –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –ø–æ—Ä—Ç–æ–≤ Valheim

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!

–î–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ä—Ç–æ–≤ –≤ Windows Firewall –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –∏–ª–∏ PowerShell **–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**.

## üöÄ –°–ø–æ—Å–æ–±—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ä—Ç–æ–≤:

### –°–ø–æ—Å–æ–± 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

1. **–©–µ–ª–∫–Ω–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏** –Ω–∞ —Ñ–∞–π–ª `unblock-ports.bat`
2. –í—ã–±–µ—Ä–∏—Ç–µ **"–ó–∞–ø—É—Å–∫ –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞"**
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∞ —ç–∫—Ä–∞–Ω–µ

### –°–ø–æ—Å–æ–± 2: –†—É—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ

1. –ù–∞–∂–º–∏—Ç–µ `Win + R`, –≤–≤–µ–¥–∏—Ç–µ `cmd`
2. –ù–∞–∂–º–∏—Ç–µ `Ctrl + Shift + Enter` (–∑–∞–ø—É—Å–∫ –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞: `cd /d G:\Projects\valheim`
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

```cmd
REM –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ä—Ç—ã Valheim
netsh advfirewall firewall add rule name="Valheim - Server Query - 2456/UDP" dir=in action=allow protocol=UDP localport=2456
netsh advfirewall firewall add rule name="Valheim - Server Game - 2457/UDP" dir=in action=allow protocol=UDP localport=2457
netsh advfirewall firewall add rule name="Valheim - Server Steam - 2458/UDP" dir=in action=allow protocol=UDP localport=2458

REM –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã –¥–ª—è Steam
netsh advfirewall firewall add rule name="Steam - Query - 27015/UDP" dir=in action=allow protocol=UDP localport=27015
netsh advfirewall firewall add rule name="Steam - Master Server - 27036/UDP" dir=in action=allow protocol=UDP localport=27036

REM RCON –ø–æ—Ä—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
netsh advfirewall firewall add rule name="Valheim - RCON - 25575/TCP" dir=in action=allow protocol=TCP localport=25575
```

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ PowerShell (–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)

1. –ù–∞–∂–º–∏—Ç–µ `Win + X`, –≤—ã–±–µ—Ä–∏—Ç–µ **"Windows PowerShell (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)"**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É: `cd G:\Projects\valheim`
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ: `.\unblock-valheim-ports.ps1`

## üìã –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã –¥–ª—è Valheim:

| –ü–æ—Ä—Ç | –ü—Ä–æ—Ç–æ–∫–æ–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|----------|------------|
| 2456 | UDP | Valheim Server Query |
| 2457 | UDP | Valheim Server Game (–æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ä—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è) |
| 2458 | UDP | Valheim Server Steam |
| 27015 | UDP | Steam Query (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| 27036 | UDP | Steam Master Server (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| 25575 | TCP | RCON (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤:

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã:

```cmd
netsh advfirewall firewall show rule name="Valheim*"
```

–ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞:
```cmd
netsh advfirewall firewall show rule name=all | findstr "Valheim"
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ netstat:

```cmd
netstat -an | findstr "245"
```

## üöÄ –ü–æ—Å–ª–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ä—Ç–æ–≤:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `docker-compose up -d`
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:
   - **IP**: localhost (–∏–ª–∏ –≤–∞—à –≤–Ω–µ—à–Ω–∏–π IP)
   - **–ü–æ—Ä—Ç**: 2457
   - **–ü–∞—Ä–æ–ª—å**: 121314
   - **–ò–º—è —Å–µ—Ä–≤–µ—Ä–∞**: Karjalainen

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:

### –ï—Å–ª–∏ –ø–æ—Ä—Ç—ã –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ª–∏ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –≤–∏–¥–µ–Ω –≤ —Å–ø–∏—Å–∫–µ:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `PUBLIC_SERVER=1` –≤ —Ñ–∞–π–ª–µ `valheim.env`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 2457 –æ—Ç–∫—Ä—ã—Ç
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ IP –Ω–∞–ø—Ä—è–º—É—é

### –ï—Å–ª–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω: `docker-compose ps`
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `docker-compose logs valheim`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç (2457, –Ω–µ 2456)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞:

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –õ–æ–≥–∏ Docker: `docker-compose logs -f valheim`
- –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: `docker-compose ps`
- –ü—Ä–∞–≤–∏–ª–∞ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞: `netsh advfirewall firewall show rule name="Valheim*"`

